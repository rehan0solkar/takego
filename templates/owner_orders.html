<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Owner Orders</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='common.css') }}">
</head>
<style>
.order-row{padding:12px;border-bottom:1px solid #eee; animation: flash .6s;transition:.2s}
.order-row:hover{background:#f9f9f9}
.token-badge{background:#000;color:#fff;padding:6px 12px;border-radius:20px;font-weight:600}
@keyframes flash{
 from{background:#ffffff}
 to{background:#fff}
}
</style>
<body>
<header class="navbar">
    <h1 class="logo">Orders</h1>
    <nav>
        <a href="/owner">Back</a>
        <a href="/logout">Logout</a>
    </nav>
</header>
<main class="container">
    <h2>Incoming Orders</h2>

<table class="owner-orders-table">
  <thead>
    <tr>
      <th>Token</th>
      <th>Status</th>
      <th>Product</th>
      <th>Action</th>
    </tr>
  </thead>

  <tbody id="ordersBox">
    {% include "owner_orders_partial.html" %}
  </tbody>
</table>
</main>
<script>
let lastCount = 0;

function refreshOrders() {
  fetch("/owner_orders_partial")
    .then(r => r.text())
    .then(html => {
      const box = document.getElementById("ordersBox");

      const temp = document.createElement("tbody");
      temp.innerHTML = html;
      const newCount = temp.querySelectorAll("tr.order-row").length;

      if (lastCount !== 0 && newCount > lastCount) {
        playSound();
      }

      lastCount = newCount;
      box.innerHTML = html;
    })
    .catch(() => console.log("Order refresh failed"));
}
  setTimeout(() => {
    window.location.reload();
  }, 5000); // 5 seconds

</script>
</body>
</html>



